<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel de Controle - Roleta Shopee</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background-color: #f5f5f5;
      padding: 20px;
      color: #333;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #f04d2e;
    }
    .painel-configuracoes {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    .grupo-config {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #f04d2e;
    }
    .grupo-config h3 {
      margin-bottom: 15px;
      color: #f04d2e;
    }
    .campo {
      margin-bottom: 15px;
    }
    .campo label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }
    .campo input[type="text"],
    .campo input[type="color"],
    .campo select,
    .campo input[type="file"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .botoes {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    button {
      padding: 12px 25px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 700;
      transition: all 0.3s;
    }
    #btnSalvar {
      background-color: #4CAF50;
      color: white;
    }
    #btnReset {
      background-color: #f44336;
      color: white;
    }
    #btnPreview {
      background-color: #2196F3;
      color: white;
    }
    button:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    .mensagem {
      text-align: center;
      padding: 10px;
      margin-top: 15px;
      border-radius: 4px;
      display: none;
    }
    .sucesso {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .erro {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .preview-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .preview-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 90%;
      max-height: 90%;
      overflow: auto;
    }
    #btnFecharPreview {
      background-color: #f44336;
      color: white;
      margin-top: 15px;
    }
    .imagem-previa {
      max-width: 100px;
      max-height: 100px;
      margin-top: 5px;
      border: 1px solid #ddd;
      border-radius: 4px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Painel de Controle - Roleta Shopee</h1>
    
    <form id="formConfiguracoes">
      <div class="painel-configuracoes">
        <!-- Configura√ß√µes de Texto -->
        <div class="grupo-config">
          <h3>Textos e Conte√∫do</h3>
          <div class="campo">
            <label for="textoBotaoGirar">Texto do Bot√£o Girar</label>
            <input type="text" id="textoBotaoGirar" name="textoBotaoGirar">
          </div>
          <div class="campo">
            <label for="textoDescricao">Texto Principal da Roleta</label>
            <input type="text" id="textoDescricao" name="textoDescricao">
          </div>
          <div class="campo">
            <label for="descricaoAdicional1">Descri√ß√£o Adicional 1</label>
            <input type="text" id="descricaoAdicional1" name="descricaoAdicional1">
          </div>
          <div class="campo">
            <label for="descricaoAdicional2">Descri√ß√£o Adicional 2</label>
            <input type="text" id="descricaoAdicional2" name="descricaoAdicional2">
          </div>
          <div class="campo">
            <label for="numeroWhatsapp">N√∫mero do WhatsApp</label>
            <input type="text" id="numeroWhatsapp" name="numeroWhatsapp" placeholder="5511999999999">
          </div>
          <div class="campo">
            <label for="textoTituloPopup">T√≠tulo do Popup</label>
            <input type="text" id="textoTituloPopup" name="textoTituloPopup">
          </div>
          <div class="campo">
            <label for="textoPopup">Texto do Popup</label>
            <input type="text" id="textoPopup" name="textoPopup">
          </div>
          <div class="campo">
            <label for="textoBotaoWhatsapp">Texto do Bot√£o WhatsApp</label>
            <input type="text" id="textoBotaoWhatsapp" name="textoBotaoWhatsapp">
          </div>
        </div>

        <!-- Configura√ß√µes de Cores -->
        <div class="grupo-config">
          <h3>Cores da Interface</h3>
          <div class="campo">
            <label for="corFundoTela">Cor de Fundo da Tela</label>
            <input type="color" id="corFundoTela" name="corFundoTela" value="#f04d2e">
          </div>
          <div class="campo">
            <label for="corFundoRoleta">Cor de Fundo da Roleta</label>
            <input type="color" id="corFundoRoleta" name="corFundoRoleta" value="#f04d2e">
          </div>
          <div class="campo">
            <label for="corBordaRoleta">Cor da Borda da Roleta</label>
            <input type="color" id="corBordaRoleta" name="corBordaRoleta" value="#c73c23">
          </div>
          <div class="campo">
            <label for="corBotaoGirar">Cor do Bot√£o Girar</label>
            <input type="color" id="corBotaoGirar" name="corBotaoGirar" value="#ff6b47">
          </div>
          <div class="campo">
            <label for="corFatiaPar">Cor das Fatias Pares</label>
            <input type="color" id="corFatiaPar" name="corFatiaPar" value="#f04d2e">
          </div>
          <div class="campo">
            <label for="corFatiaImpar">Cor das Fatias √çmpares</label>
            <input type="color" id="corFatiaImpar" name="corFatiaImpar" value="#ffffff">
          </div>
          <div class="campo">
            <label for="corTexto">Cor do Texto</label>
            <input type="color" id="corTexto" name="corTexto" value="#ffffff">
          </div>
          <div class="campo">
            <label for="corFundoPopup">Cor de Fundo do Popup</label>
            <input type="color" id="corFundoPopup" name="corFundoPopup" value="#f04d2e">
          </div>
          <div class="campo">
            <label for="corBotaoWhatsapp">Cor do Bot√£o WhatsApp</label>
            <input type="color" id="corBotaoWhatsapp" name="corBotaoWhatsapp" value="#25D366">
          </div>
          <div class="campo">
            <label for="corDivisorFatias">Cor dos Divisores das Fatias</label>
            <input type="color" id="corDivisorFatias" name="corDivisorFatias" value="#ffffff">
          </div>
        </div>

        <!-- Configura√ß√µes de Imagens -->
        <div class="grupo-config">
          <h3>Imagens da Roleta</h3>
          <div class="campo">
            <label for="logoCima">Logo Superior</label>
            <input type="file" id="logoCima" name="logoCima" accept="image/*">
            <img id="previewLogoCima" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="logoCentro">Logo Central</label>
            <input type="file" id="logoCentro" name="logoCentro" accept="image/*">
            <img id="previewLogoCentro" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="seta">Imagem da Seta</label>
            <input type="file" id="seta" name="seta" accept="image/*">
            <img id="previewSeta" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="premio1">Pr√™mio 1</label>
            <input type="file" id="premio1" name="premio1" accept="image/*">
            <img id="previewPremio1" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="premio2">Pr√™mio 2</label>
            <input type="file" id="premio2" name="premio2" accept="image/*">
            <img id="previewPremio2" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="premio3">Pr√™mio 3</label>
            <input type="file" id="premio3" name="premio3" accept="image/*">
            <img id="previewPremio3" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="premio4">Pr√™mio 4</label>
            <input type="file" id="premio4" name="premio4" accept="image/*">
            <img id="previewPremio4" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="premio5">Pr√™mio 5</label>
            <input type="file" id="premio5" name="premio5" accept="image/*">
            <img id="previewPremio5" class="imagem-previa">
          </div>
          <div class="campo">
            <label for="premio6">Pr√™mio 6</label>
            <input type="file" id="premio6" name="premio6" accept="image/*">
            <img id="previewPremio6" class="imagem-previa">
          </div>
        </div>

        <!-- Configura√ß√µes Avan√ßadas -->
        <div class="grupo-config">
          <h3>Configura√ß√µes Avan√ßadas</h3>
          <div class="campo">
            <label for="fontePersonalizada">Fonte Personalizada</label>
            <select id="fontePersonalizada" name="fontePersonalizada">
              <option value="Roboto">Roboto</option>
              <option value="Arial">Arial</option>
              <option value="Helvetica">Helvetica</option>
              <option value="Open Sans">Open Sans</option>
              <option value="Montserrat">Montserrat</option>
              <option value="Poppins">Poppins</option>
              <option value="Lato">Lato</option>
            </select>
          </div>
          <div class="campo">
            <label for="premioSorteado">Pr√™mio Sorteado (√çndice 0-5)</label>
            <input type="number" id="premioSorteado" name="premioSorteado" min="0" max="5" value="1">
          </div>
        </div>
      </div>

      <div class="botoes">
        <button type="button" id="btnSalvar">Salvar Configura√ß√µes</button>
        <button type="button" id="btnReset">Restaurar Padr√µes</button>
        <button type="button" id="btnPreview">Visualizar Roleta</button>
      </div>

      <div id="mensagem" class="mensagem"></div>
    </form>
  </div>

  <div class="preview-container" id="previewContainer">
    <div class="preview-content">
      <iframe id="previewIframe" width="100%" height="500" frameborder="0"></iframe>
      <div style="text-align: center;">
        <button type="button" id="btnFecharPreview">Fechar Visualiza√ß√£o</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Configura√ß√µes padr√£o para as imagens
      const configuracoesPadrao = {
        corFundoTela: '#f04d2e',
        corFundoRoleta: '#f04d2e',
        corBordaRoleta: '#c73c23',
        corBotaoGirar: '#ff6b47',
        corFatiaPar: '#f04d2e',
        corFatiaImpar: '#ffffff',
        corTexto: '#ffffff',
        textoBotaoGirar: 'GIRAR A ROLETA',
        textoDescricao: 'M√™s de pr√™mios: Roleta premiada<br>Shopee',
        numeroWhatsapp: 'SEUNUMERO',
        premioSorteado: '1',
        corFundoPopup: '#f04d2e',
        corBotaoWhatsapp: '#25D366',
        textoTituloPopup: 'Parab√©ns! üéâ',
        textoPopup: 'Voc√™ ganhou um <strong>cupom exclusivo de desconto</strong> baseado na sua √∫ltima compra na Shopee.<br><strong>Exemplo</strong>: se voc√™ comprou um produto de <strong>R$1500</strong>, seu cupom ser√° do mesmo valor.',
        textoBotaoWhatsapp: 'Receber seu Cupom',
        fontePersonalizada: 'Roboto',
        corDivisorFatias: '#ffffff',
        descricaoAdicional1: 'Participe da promo√ß√£o especial',
        descricaoAdicional2: 'Gire a roleta e ganhe descontos incr√≠veis!',
        logoCima: 'assets/logo1.png',
        logoCentro: 'assets/logo2.png',
        seta: 'assets/seta.png',
        premio1: 'assets/p1.png',
        premio2: 'assets/p2.png',
        premio3: 'assets/p3.png',
        premio4: 'assets/p4.png',
        premio5: 'assets/p5.png',
        premio6: 'assets/p6.png'
      };

      // Configurar preview de imagens
      const fileInputs = document.querySelectorAll('input[type="file"]');
      fileInputs.forEach(input => {
        input.addEventListener('change', function(e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            const previewId = 'preview' + input.id.charAt(0).toUpperCase() + input.id.slice(1);
            const previewElement = document.getElementById(previewId);
            
            reader.onload = function(e) {
              previewElement.src = e.target.result;
              previewElement.style.display = 'block';
            }
            
            reader.readAsDataURL(file);
          }
        });
      });

      // Carregar configura√ß√µes salvas
      carregarConfiguracoes();

      // Evento para salvar configura√ß√µes
      document.getElementById('btnSalvar').addEventListener('click', salvarConfiguracoes);

      // Evento para restaurar configura√ß√µes padr√£o
      document.getElementById('btnReset').addEventListener('click', restaurarPadroes);

      // Evento para visualizar a roleta
      document.getElementById('btnPreview').addEventListener('click', visualizarRoleta);

      // Evento para fechar a visualiza√ß√£o
      document.getElementById('btnFecharPreview').addEventListener('click', function() {
        document.getElementById('previewContainer').style.display = 'none';
      });

      // Fun√ß√£o para carregar configura√ß√µes do localStorage
      function carregarConfiguracoes() {
        const configSalvas = localStorage.getItem('configRoleta');
        if (configSalvas) {
          const config = JSON.parse(configSalvas);
          
          // Preencher os campos do formul√°rio com os valores salvos
          for (const key in config) {
            if (document.getElementById(key)) {
              document.getElementById(key).value = config[key];
              
              // Mostrar preview das imagens se existirem
              if (key.startsWith('premio') || key === 'logoCima' || key === 'logoCentro' || key === 'seta') {
                const previewId = 'preview' + key.charAt(0).toUpperCase() + key.slice(1);
                const previewElement = document.getElementById(previewId);
                if (previewElement && config[key + 'Data']) {
                  previewElement.src = config[key + 'Data'];
                  previewElement.style.display = 'block';
                }
              }
            }
          }
          
          mostrarMensagem('Configura√ß√µes carregadas com sucesso!', 'sucesso');
        } else {
          mostrarMensagem('Usando configura√ß√µes padr√£o.', 'sucesso');
        }
      }

      // Fun√ß√£o para salvar configura√ß√µes no localStorage
      function salvarConfiguracoes() {
        const form = document.getElementById('formConfiguracoes');
        const formData = new FormData(form);
        const configuracoes = {};
        
        // Processar dados do formul√°rio
        for (const [key, value] of formData.entries()) {
          if (key.endsWith('Data')) continue; // Ignorar campos de dados de imagem
          configuracoes[key] = value;
        }
        
        // Processar imagens
        const imageFields = ['logoCima', 'logoCentro', 'seta', 'premio1', 'premio2', 'premio3', 'premio4', 'premio5', 'premio6'];
        const imagePromises = [];
        
        imageFields.forEach(field => {
          const fileInput = document.getElementById(field);
          if (fileInput.files.length > 0) {
            const promise = new Promise((resolve) => {
              const reader = new FileReader();
              reader.onload = function(e) {
                configuracoes[field + 'Data'] = e.target.result;
                resolve();
              };
              reader.readAsDataURL(fileInput.files[0]);
            });
            imagePromises.push(promise);
          }
        });
        
        // Aguardar todas as imagens serem processadas
        Promise.all(imagePromises).then(() => {
          localStorage.setItem('configRoleta', JSON.stringify(configuracoes));
          mostrarMensagem('Configura√ß√µes salvas com sucesso!', 'sucesso');
        });
      }

      // Fun√ß√£o para restaurar configura√ß√µes padr√£o
      function restaurarPadroes() {
        // Preencher o formul√°rio com os valores padr√£o
        for (const key in configuracoesPadrao) {
          if (document.getElementById(key)) {
            document.getElementById(key).value = configuracoesPadrao[key];
          }
        }
        
        // Limpar previews de imagens
        const previewElements = document.querySelectorAll('.imagem-previa');
        previewElements.forEach(el => {
          el.style.display = 'none';
          el.src = '';
        });
        
        // Limpar inputs de arquivo
        const fileInputs = document.querySelectorAll('input[type="file"]');
        fileInputs.forEach(input => {
          input.value = '';
        });
        
        // Salvar as configura√ß√µes padr√£o
        localStorage.setItem('configRoleta', JSON.stringify(configuracoesPadrao));
        mostrarMensagem('Configura√ß√µes padr√£o restauradas e salvas!', 'sucesso');
      }

      // Fun√ß√£o para visualizar a roleta com as configura√ß√µes atuais
      function visualizarRoleta() {
        // Primeiro salvar as configura√ß√µes atuais
        salvarConfiguracoes();
        
        // Abrir a visualiza√ß√£o
        const previewContainer = document.getElementById('previewContainer');
        const previewIframe = document.getElementById('previewIframe');
        
        previewIframe.src = 'index.html?preview=true';
        previewContainer.style.display = 'flex';
      }

      // Fun√ß√£o para mostrar mensagens de feedback
      function mostrarMensagem(mensagem, tipo) {
        const msgElement = document.getElementById('mensagem');
        msgElement.textContent = mensagem;
        msgElement.className = 'mensagem ' + tipo;
        msgElement.style.display = 'block';
        
        setTimeout(() => {
          msgElement.style.display = 'none';
        }, 3000);
      }
    });
  </script>
</body>
</html>